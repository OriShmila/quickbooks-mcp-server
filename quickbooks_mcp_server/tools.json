{
  "version": "1.0.0",
  "description": "QuickBooks MCP Server Tools",
  "tools": [
    {
      "name": "get_entity_schema",
      "description": "Fetch the field schema for a QuickBooks entity. Use before queries to see valid fields.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "entity_name": {
            "type": "string",
            "enum": [
              "Account",
              "Bill",
              "BillPayment",
              "Budget",
              "Class",
              "CompanyInfo",
              "CreditMemo",
              "Customer",
              "Department",
              "Employee",
              "Estimate",
              "Invoice",
              "Item",
              "JournalEntry",
              "Payment",
              "PaymentMethod",
              "Preferences",
              "Purchase",
              "PurchaseOrder",
              "SalesReceipt",
              "TaxAgency",
              "TaxCode",
              "TaxRate",
              "Term",
              "TimeActivity",
              "Transfer",
              "Vendor",
              "VendorCredit"
            ]
          }
        },
        "required": ["entity_name"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "entity": { "type": "string" },
          "schema": { "type": "object" }
        },
        "required": ["entity", "schema"]
      }
    },
    {
      "name": "query_quickbooks",
      "description": "Run a read-only SQL-like query. Example: SELECT Name, Balance FROM Account WHERE AccountType = 'Bank'.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "pattern": "^\\s*SELECT\\s+.+\\s+FROM\\s+\\w+.*$",
            "minLength": 10
          },
          "page_token": { "type": "string" }
        },
        "required": ["query"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "result": { "type": "array", "items": { "type": "object" } },
          "next_page_token": { "type": "string" }
        },
        "required": ["result"]
      }
    },
    {
      "name": "get_report",
      "description": "Run a QuickBooks report and return tidy normalized rows (always long format). Supports P&L, Balance Sheet, Cash Flow, General Ledger, Trial Balance.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "report_name": {
            "type": "string",
            "enum": [
              "ProfitAndLoss",
              "BalanceSheet",
              "CashFlow",
              "GeneralLedger",
              "TrialBalance"
            ]
          },
          "accounting_method": {
            "type": "string",
            "enum": ["Accrual", "Cash"],
            "default": "Accrual"
          },
          "date_macro": {
            "type": "string",
            "enum": [
              "Today",
              "Yesterday",
              "This Week",
              "Previous Week",
              "Next Week",
              "Next 4 Weeks",
              "This Month",
              "Previous Month",
              "Next Month",
              "This Month-to-date",
              "Previous Month-to-date",
              "This Fiscal Quarter",
              "Previous Fiscal Quarter",
              "Next Fiscal Quarter",
              "This Fiscal Quarter-to-date",
              "Previous Fiscal Quarter-to-date",
              "This Fiscal Year",
              "Previous Fiscal Year",
              "Next Fiscal Year",
              "This Fiscal Year-to-date",
              "Previous Fiscal Year-to-date"
            ]
          },
          "start_date": { "type": "string", "format": "date" },
          "end_date": { "type": "string", "format": "date" },
          "group_by": {
            "type": "string",
            "enum": [
              "Total",
              "Month",
              "Week",
              "Days",
              "Quarter",
              "Year",
              "Customers",
              "Vendors",
              "Classes",
              "Departments",
              "Employees",
              "ProductsAndServices"
            ],
            "description": "How to bucket the report periods."
          },
          "filters": {
            "type": "object",
            "description": "Comma-separated IDs for common filters.",
            "properties": {
              "customer": { "type": "string" },
              "vendor": { "type": "string" },
              "class": { "type": "string" },
              "department": { "type": "string" },
              "item": { "type": "string" },
              "account": { "type": "string" }
            },
            "additionalProperties": false
          },
          "page_token": { "type": "string" }
        },
        "allOf": [
          {
            "description": "Require either date_macro or both start_date and end_date.",
            "anyOf": [
              { "required": ["date_macro"] },
              { "required": ["start_date", "end_date"] }
            ]
          }
        ],
        "required": ["report_name"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "result": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Each row = one line-period pair. Example: { line, period, amount, ... }"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "report_name": { "type": "string" },
              "currency": { "type": "string" },
              "period": {
                "type": "object",
                "properties": {
                  "start_date": { "type": "string" },
                  "end_date": { "type": "string" },
                  "date_macro": { "type": "string" }
                }
              },
              "group_by": { "type": "string" },
              "columns": { "type": "array", "items": { "type": "string" } },
              "source": {
                "type": "object",
                "properties": { "qb_realm_id": { "type": "string" } }
              }
            },
            "required": ["report_name", "period", "columns"]
          },
          "next_page_token": { "type": "string" }
        },
        "required": ["result", "meta"]
      }
    }
  ]
}
